<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!--  <meta http-equiv="refresh" content="1" />   -->
    </head>
    <body>
        <div id="tauler" style="font-family: Courier New; font-size: 25px;color:grey; font-weight: bold;line-height: 6px"></div>
        <div id="fan"></div>



    </body> 
    <footer>

        <script>
            //declarem el mapa del pacman
            var mapa = new Array(30);

            mapa[00] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            mapa[01] = [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0];
            mapa[02] = [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0];
            mapa[03] = [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0];
            mapa[04] = [0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0];
            mapa[05] = [0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0];
            mapa[06] = [0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0];
            mapa[07] = [0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0];
            mapa[08] = [0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
            mapa[09] = [0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
            mapa[10] = [0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
            mapa[11] = [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0];
            mapa[12] = [0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0];
            mapa[13] = [0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0];
            mapa[14] = [0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0];
            mapa[15] = [0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0];
            mapa[16] = [0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0];
            mapa[17] = [0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0];
            mapa[18] = [0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0];
            mapa[19] = [0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1, 0];
            mapa[20] = [0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0];
            mapa[21] = [0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0];
            mapa[22] = [0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0];
            mapa[23] = [0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0];
            mapa[24] = [0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0];
            mapa[25] = [0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0];
            mapa[26] = [0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0];
            mapa[27] = [0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0];
            mapa[28] = [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0];
            mapa[29] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];



//a=setInterval.....//a.clearInterval()  deixa dexecutar
            function pintarweb() {
                var fila = "";
                for (var i = 0; i < mapa.length; i++) {
                    fila += "<br>";
                    for (var c = 0; c < mapa[i].length; c++) {
                        if (mapa[i][c] === 0) {
                            fila += "<img src='ic.png' height='15' width='15'>";
                        } else if (mapa[i][c] === 1) {
                            fila += "&nbsp;";
                        } else if (mapa[i][c] === "f") {
                            fila += "<img src='coco.gif' height='15' width='15'>";
                        } else {
                            fila += "<img src='pacc.gif' height='15' width='15'>";
                        }
                    }
                }

                document.getElementById("tauler").innerHTML = fila;
            }
            function pintar() {
                var fila = "";
                for (var i = 0; i < mapa.length; i++) {
                    fila += "\n";
                    for (var c = 0; c < mapa[i].length; c++) {
                        if (mapa[i][c] === 0) {
                            fila += "X";
                        } else //if(mapa[i][c]===1){
                            fila += " ";
                        //}
                        ////else if(mapa[i][c]==="f"){
                        //    fila += "F";
                        // } else {
                        //     fila += "@";
                        // }
                    }
                }
                console.log(fila);
            }
            function aleatorio(minimo, maximo) {
                return Math.floor(Math.random() * ((maximo + 1) - minimo) + minimo);
            }
            //declaro el jugador
            var jugador = new Array(4);
            //declaro els fantasmes
            var fantasmas = new Array(3);
            for (var i = 0; i < fantasmas.length; i++) {
                fantasmas[i] = new Array(3);
            }

//COMENSEM A FER EL RANDOM del jugdor i dels fantasmasmes
            function Faleatori() {

                for (var i = 0; i < fantasmas.length; i++) {

                    do {
                        var num = aleatorio(0, 29);
                        var num2 = aleatorio(0, 29);
                    } while (mapa[num][num2] !== 1);
                    mapa[num][num2] = "f";

                    fantasmas[i][0] = num;
                    fantasmas[i][1] = num2;


                }


            }
            //posicionem el jugador
            function Jaleatori() {
                do {
                    var num = aleatorio(0, 29);
                    var num2 = aleatorio(0, 29);
                } while (mapa[num][num2] !== 1);
                jugador[0] = num;
                jugador[1] = num2;
                if (mapa[num + 1][num2] === "f" || mapa[num - 1][num2] === "f" || mapa[num][num2 + 1] === "f" || mapa[num][num2 - 1] === "f") {
                    Jaleatori();
                } else {
                    mapa[num][num2] = "J";

                    do {
                        var sortir = 0;
                        var direccio = aleatorio(0, 3);
                        switch (direccio) {
                            case 0:
                                if (mapa[num - 1][num2] === 0) {
                                    sortir = 0;
                                } else {
                                    jugador[2] = direccio;
                                    sortir = 1;
                                }
                                break;
                            case 1:
                                if (mapa[num + 1][num2] === 0) {
                                    sortir = 0;
                                } else {
                                    jugador[2] = direccio;
                                    sortir = 1;
                                }
                                break;
                            case 2:
                                if (mapa[num][num2 - 1] === 0) {
                                    sortir = 0;
                                } else {
                                    jugador[2] = direccio;
                                    sortir = 1;
                                }
                                break;
                            case 3:
                                if (mapa[num][num2 + 1] === 0) {
                                    sortir = 0;
                                } else {
                                    jugador[2] = direccio;
                                    sortir = 1;
                                }
                                break;
                        }
                        jugador[3] = direccio;
                    } while (sortir === 0);
                }
            }
            //0=amun  // 1= avall //  2=esquerra  //   3 =dreta
            function Fdireccio() {
                for (var i = 0; i < fantasmas.length; i++) {
                    Fredireccio(i);
                }
            }
            function FanCruilla() {
                for (var i = 0; i < fantasmas.length; i++) {
                    var cont = 0;
                    if (mapa[(fantasmas[i][0]) - 1][fantasmas[i][1]] === 1) {
                        cont++;
                    }
                    if (mapa[(fantasmas[i][0]) + 1][fantasmas[i][1]] === 1) {
                        cont++;
                    }
                    if (mapa[fantasmas[i][0]][(fantasmas[i][1]) - 1] === 1) {
                        cont++;
                    }
                    if (mapa[fantasmas[i][0]][(fantasmas[i][1]) + 1] === 1) {
                        cont++;
                    }
                    if (cont > 2) {
                        Fredireccio(i);
                    }
                    comprovar(i);
                }
            }
            function Fredireccio(i) {

                do {
                    var sortir = 0;
                    var direccio = aleatorio(0, 3);
                    switch (direccio) {
                        case 0:
                            if (mapa[(fantasmas[i][0]) - 1][fantasmas[i][1]] === 0) {
                                sortir = 0;
                            } else {
                                fantasmas[i][2] = direccio;
                                sortir = 1;
                            }
                            break;
                        case 1:
                            if (mapa[(fantasmas[i][0]) + 1][fantasmas[i][1]] === 0) {
                                sortir = 0;
                            } else {
                                fantasmas[i][2] = direccio;
                                sortir = 1;
                            }
                            break;
                        case 2:
                            if (mapa[fantasmas[i][0]][(fantasmas[i][1]) - 1] === 0) {
                                sortir = 0;
                            } else {
                                fantasmas[i][2] = direccio;
                                sortir = 1;
                            }
                            break;
                        case 3:
                            if (mapa[fantasmas[i][0]][(fantasmas[i][1]) + 1] === 0) {
                                sortir = 0;
                            } else {
                                fantasmas[i][2] = direccio;
                                sortir = 1;
                            }
                            break;
                    }

                } while (sortir === 0);

            }

            function comprovar(i) {

                var direccio = fantasmas[i][2];
                switch (direccio) {
                    case 0:
                        if (mapa[(fantasmas[i][0]) - 1][fantasmas[i][1]] === 0) {
                            Fredireccio(i);
                        }
                        break;
                    case 1:
                        if (mapa[(fantasmas[i][0]) + 1][fantasmas[i][1]] === 0) {
                            Fredireccio(i);
                        }
                        break;
                    case 2:
                        if (mapa[fantasmas[i][0]][(fantasmas[i][1]) - 1] === 0) {
                            Fredireccio(i);
                        }
                        break;
                    case 3:
                        if (mapa[fantasmas[i][0]][(fantasmas[i][1]) + 1] === 0) {
                            Fredireccio(i);
                        }
                        break;
                }

            }

            function moureF() {
                for (var i = 0; i < fantasmas.length; i++) {

                    var dir = fantasmas[i][2];
                    switch (dir) {
                        case 0:
                            mapa[(fantasmas[i][0]) - 1][fantasmas[i][1]] = 'f';
                            mapa[(fantasmas[i][0])][fantasmas[i][1]] = 1;
                            
                            fantasmas[i][0]=(fantasmas[i][0])-1;
                            
                            
                            break;
                        case 1:
                            mapa[(fantasmas[i][0]) + 1][fantasmas[i][1]] = 'f';
                            mapa[(fantasmas[i][0])][fantasmas[i][1]] = 1;
                            
                            fantasmas[i][0]=(fantasmas[i][0])+1;
                            
                            break;
                        case 2:
                            mapa[fantasmas[i][0]][(fantasmas[i][1]) - 1] = 'f';
                            mapa[(fantasmas[i][0])][fantasmas[i][1]] =1;
                            
                            fantasmas[i][1]=(fantasmas[i][1]) - 1;
                            
                            break;
                        case 3:
                            mapa[fantasmas[i][0]][(fantasmas[i][1]) + 1] = 'f';
                            mapa[(fantasmas[i][0])][fantasmas[i][1]] = 1;
                            
                            fantasmas[i][1]=(fantasmas[i][1]) + 1;
                            
                            break;
                    }
                    
                }
                FanCruilla();
            }
            //CRIDEM AL MAPA PER LA WEB I PER LA CONSOLA


            Faleatori();
            Jaleatori();
            Fdireccio();
            pintarweb();
            pintar();

            setInterval(function () {
                moureF();
                pintarweb();
                
            }, 1);

        </script>

    </footer>

</html>
